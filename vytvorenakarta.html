<!DOCTYPE html>
<html lang="cs">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Fin√°ln√≠ smlouva ‚Äì Altiven 2.0</title><link rel="manifest" href="manifest.webmanifest">
<meta name="theme-color" content="#0b5fff">

  <link rel="stylesheet" href="css/style.css">
  <link rel="manifest" href="manifest.webmanifest">
<meta name="theme-color" content="#0b5fff">
</head>
<body>
  <header class="main-header app-only">
    <div class="logo"><span class="logo-sm">üìÑ</span><h1>Fin√°ln√≠ smlouva</h1></div>
    <nav class="top-actions">
      <a class="btn ghost" href="vytvoritsmlouvu.html">‚Üê Zpƒõt (upravit)</a>
      <button class="btn" onclick="location.href='predavaciprotokol.html'">Pokraƒçovat na p≈ôed√°vac√≠ protokol ‚Üí</button>
    </nav>
  </header>

  <main class="container">
    <!-- Tohle je jedin√Ω exportn√≠ scope ‚Äì jen obsah smlouvy, bez ovl√°d√°n√≠ -->
    <section id="contractOut" class="export-scope"></section>

    <div class="flex app-only mt16">
      <button class="btn" data-export-pdf>St√°hnout PDF</button>
      <button class="btn ghost" data-export-print>Vytisknout</button>
      <button class="btn ghost" data-export-email>Odeslat e‚Äëmailem</button>
      <div class="right small">Tlaƒç√≠tka se nezobraz√≠ v exportech.</div>
    </div>
  </main>

  <footer class="app-footer app-only"><p>¬© 2025 Altiven</p></footer>

  <script src="https://cdn.jsdelivr.net/npm/html2pdf.js@0.10.1/dist/html2pdf.bundle.min.js" defer></script><!-- Firebase SDK (compat) -->
<script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore-compat.js"></script>

  <script src="js/script.js"></script><script src="js/firebase.js"></script>
  <!-- Firebase SDK (compat) ‚Äì PO≈òAD√ç D≈ÆLE≈ΩIT√â -->
<script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore-compat.js"></script>

<!-- Moje sync vrstva (js/firebase.js) -->
<script src="js/firebase.js"></script>
<script>
  // ‚¨áÔ∏è Sem vlo≈æ sv≈Øj config z Firebase konzole (ten, co pr√°vƒõ vid√≠≈° na obrazovce)
  FirebaseSync.init({
    apiKey: "TV≈ÆJ_API_KEY",
    authDomain: "TV≈ÆJ-PROJEKT.firebaseapp.com",
    projectId: "TV≈ÆJ-PROJEKT",
    storageBucket: "TV≈ÆJ-PROJEKT.appspot.com",
    messagingSenderId: "XXXXXXXX",
    appId: "1:XXXXXXXX:web:YYYYYYYY"
  });
</script>

<!-- Registrace service workeru (PWA / offline) -->
<script>
  if ('serviceWorker' in navigator) {
    window.addEventListener('load', () => {
      navigator.serviceWorker.register('./service-worker.js').catch(console.error);
    });
  }
</script>

<script>
  // 1) Vlo≈æ sv√© hodnoty (nebo zat√≠m dummy) ‚Äì viz firebase.js
  FirebaseSync.init({
    apiKey:     "TV≈ÆJ_API_KEY",
    authDomain: "TV≈ÆJ-PROJEKT.firebaseapp.com",
    projectId:  "TV≈ÆJ-PROJEKT",
    storageBucket: "TV≈ÆJ-PROJEKT.appspot.com",
    messagingSenderId: "XXXXXX",
    appId:      "1:XXXXXX:web:YYYYYY"
  });
</script>

  <script>
    document.addEventListener('DOMContentLoaded', ()=>{
      const data = loadContractData();
      const html = buildContractHTML(data);
      document.getElementById('contractOut').innerHTML = html;
      bindExportButtons('#contractOut');
    });
  </script><script>
  if ('serviceWorker' in navigator) {
    window.addEventListener('load', () => {
      navigator.serviceWorker.register('./service-worker.js').catch(console.error);
    });
  }
</script>

</body>
</html>
